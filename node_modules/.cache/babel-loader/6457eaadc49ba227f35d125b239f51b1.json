{"ast":null,"code":"import _slicedToArray from\"/Users/karina/Main/Study/Web Dev/TEST/weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Header from\"./components/Header\";import Footer from\"./components/Footer\";import Loader from\"./components/Loader\";import Warning from\"./components/Warning\";import WeatherAndForecast from\"./components/WeatherAndForecast\";import getCoordinatesOfAddress from\"./api/forwardGeocoding\";import getWeatherAndForecast from\"./api/weatherAndForecast\";import\"./styles/App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// задаем изначальные состояния для будущих данных\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),coordinates=_useState4[0],setCoordinates=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),weatherAndForecastInfo=_useState6[0],setWeatherAndForecastInfo=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),locationInfo=_useState8[0],setLocationInfo=_useState8[1];var _useState9=useState(\"none\"),_useState10=_slicedToArray(_useState9,2),contentState=_useState10[0],setContentState=_useState10[1];// сохраняем данные из ввода\nfunction searchCity(target){setAddress(target);}// предупреждение об ошибке\nfunction showWarning(){setContentState(\"warning\");setTimeout(function(){return setContentState(\"none\");},5000);}// задаем адрес \nuseEffect(function(){if(address===\"\")return;setContentState(\"loading\");// экран загрузки во время получения данных\n// получаем адрес для работы \ngetCoordinatesOfAddress(address).then(function(res){if(res.data.length===0||res.data.results[0].components.city===undefined&&res.data.results[0].components.town===undefined){showWarning();// если ничего не было введено или ничего не найдено -> ошибка\nreturn;}// задаем координаты в стейт\nsetCoordinates(res.data.results[0].geometry);// задаем инфо о городе\nsetLocationInfo({city:res.data.results[0].components.city,town:res.data.results[0].components.town,state:res.data.results[0].components.state_code,country:res.data.results[0].components.country_code});}).catch(function(error){return showWarning();});},[address]);// задаем координаты\nuseEffect(function(){if(Object.keys(coordinates).length===0)return;// получаем координаты для работы \ngetWeatherAndForecast(coordinates).then(function(res){setWeatherAndForecastInfo(res.data);setContentState(\"weatherAndForecast\");}).catch(function(error){return showWarning();});},[coordinates]);// создаем js обьект с состояниями для загрузки, ошибки, и отображения инфо\nvar Main={none:function none(){return null;},loading:function loading(){return/*#__PURE__*/_jsx(Loader,{});},warning:function warning(){return/*#__PURE__*/_jsx(Warning,{});},weatherAndForecast:function weatherAndForecast(){return/*#__PURE__*/_jsx(WeatherAndForecast,{weatherInfo:weatherAndForecastInfo,location:locationInfo});}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"App__container\",children:[/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{searchCity:searchCity}),Main[contentState]()]}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["/Users/karina/Main/Study/Web Dev/TEST/weather-app/src/App.js"],"names":["React","useState","useEffect","Header","Footer","Loader","Warning","WeatherAndForecast","getCoordinatesOfAddress","getWeatherAndForecast","App","address","setAddress","coordinates","setCoordinates","weatherAndForecastInfo","setWeatherAndForecastInfo","locationInfo","setLocationInfo","contentState","setContentState","searchCity","target","showWarning","setTimeout","then","res","data","length","results","components","city","undefined","town","geometry","state","state_code","country","country_code","catch","error","Object","keys","Main","none","loading","warning","weatherAndForecast"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\n\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Loader from \"./components/Loader\";\nimport Warning from \"./components/Warning\";\nimport WeatherAndForecast from \"./components/WeatherAndForecast\";\n\nimport getCoordinatesOfAddress from \"./api/forwardGeocoding\";\nimport getWeatherAndForecast from \"./api/weatherAndForecast\";\n\nimport \"./styles/App.css\";\n\nfunction App() {\n\n  // задаем изначальные состояния для будущих данных\n  const [address, setAddress] = useState(\"\");\n  const [coordinates, setCoordinates] = useState({});\n  const [weatherAndForecastInfo, setWeatherAndForecastInfo] = useState({});\n  const [locationInfo, setLocationInfo] = useState({});\n  const [contentState, setContentState] = useState(\"none\");\n\n  // сохраняем данные из ввода\n  function searchCity(target) {\n    setAddress(target);\n  }\n\n  // предупреждение об ошибке\n  function showWarning() {\n    setContentState(\"warning\");\n    setTimeout(() => setContentState(\"none\"), 5000);\n  }\n// задаем адрес \n    useEffect(() => {\n      if (address === \"\")\n        return;\n      setContentState(\"loading\");   // экран загрузки во время получения данных\n\n      // получаем адрес для работы \n      getCoordinatesOfAddress(address).then((res) => {\n        if (res.data.length === 0 || \n          (res.data.results[0].components.city === undefined &&\n          res.data.results[0].components.town === undefined)) {\n          showWarning(); // если ничего не было введено или ничего не найдено -> ошибка\n          return;\n        }\n        // задаем координаты в стейт\n        setCoordinates(res.data.results[0].geometry);\n        // задаем инфо о городе\n        setLocationInfo({\n          city: res.data.results[0].components.city,\n          town: res.data.results[0].components.town,\n          state: res.data.results[0].components.state_code,\n          country: res.data.results[0].components.country_code\n        });\n      }).catch((error) => showWarning());\n    }, [address]);\n\n// задаем координаты\n    useEffect(() => {\n        if (Object.keys(coordinates).length === 0) \n            return;\n        // получаем координаты для работы \n        getWeatherAndForecast(coordinates).then((res) => {\n            setWeatherAndForecastInfo(res.data);\n            setContentState(\"weatherAndForecast\");\n        }).catch((error) => showWarning());\n    }, [coordinates]);\n\n    \n// создаем js обьект с состояниями для загрузки, ошибки, и отображения инфо\n    const Main = {\n        none: () => null,\n        loading: () => <Loader/>,\n        warning: () => <Warning/>,\n        weatherAndForecast: () => (\n        <WeatherAndForecast\n            weatherInfo={weatherAndForecastInfo}\n            location={locationInfo}/>)\n    };\n\n    return (\n        <div className=\"App\">\n            <div className=\"App__container\">\n                <> \n                <Header searchCity={searchCity}/> \n                {Main[contentState]()}\n            </>\n            <Footer/>\n        </div>\n    </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}